<!-- SEO Optimized Head Section -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Google AdSense Verification -->
<meta name="google-adsense-account" content="ca-pub-5884595045902078">

<!-- Primary Meta Tags -->
<title>{{ translations.seo.title if translations.seo else translations.title }}</title>
<meta name="title" content="{{ translations.seo.title if translations.seo else translations.title }}">
<meta name="description" content="{{ translations.seo.description if translations.seo else translations.description }}">
<meta name="keywords" content="{{ translations.seo.keywords if translations.seo else 'video downloader, tiktok, youtube, douyin, threads' }}">
<meta name="author" content="WITHYM">
<meta name="robots" content="index, follow">
<link rel="canonical" href="{{ request.url }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="{{ request.url }}">
<meta property="og:title" content="{{ translations.seo.og_title if translations.seo else translations.title }}">
<meta property="og:description" content="{{ translations.seo.og_description if translations.seo else translations.description }}">
<meta property="og:image" content="{{ url_for('static', filename='images/og-image.jpg', _external=True) }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:site_name" content="Video Downloader">
<meta property="og:locale" content="{{ current_lang|replace('-', '_') }}">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="{{ request.url }}">
<meta name="twitter:title" content="{{ translations.seo.og_title if translations.seo else translations.title }}">
<meta name="twitter:description" content="{{ translations.seo.og_description if translations.seo else translations.description }}">
<meta name="twitter:image" content="{{ url_for('static', filename='images/twitter-card.jpg', _external=True) }}">

<!-- Hreflang Tags (Multi-language SEO) -->
{% for lang in languages %}
<link rel="alternate" hreflang="{{ lang.code }}" href="{{ request.base_url }}?lang={{ lang.code }}">
{% endfor %}
<link rel="alternate" hreflang="x-default" href="{{ request.base_url }}">

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
<link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">

<!-- Mobile Optimization -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#2563eb">
<link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">

<!-- Preconnect for Performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="https://www.google-analytics.com">
<link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">

<!-- Schema.org Structured Data (JSON-LD) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "{{ translations.title }}",
  "applicationCategory": "MultimediaApplication",
  "operatingSystem": "Any",
  "url": "{{ request.url_root }}",
  "description": "{{ translations.description }}",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "featureList": [
    "{{ translations.feature_free }}",
    "{{ translations.feature_fast }}",
    "{{ translations.feature_quality }}",
    "{{ translations.feature_safe }}"
  ],
  "softwareVersion": "1.0",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "15420",
    "bestRating": "5",
    "worstRating": "1"
  },
  "creator": {
    "@type": "Organization",
    "name": "WITHYM",
    "url": "{{ request.url_root }}"
  }
}
</script>

{% if translations.faq %}
<!-- FAQ Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for item in translations.faq %}
    {
      "@type": "Question",
      "name": "{{ item.question }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ item.answer }}"
      }
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}

<!-- HowTo Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "{{ translations.how_to_use }}",
  "description": "{{ translations.description }}",
  "step": [
    {
      "@type": "HowToStep",
      "position": 1,
      "name": "{{ translations.step1 }}",
      "text": "{{ translations.step1 }}"
    },
    {
      "@type": "HowToStep",
      "position": 2,
      "name": "{{ translations.step2 }}",
      "text": "{{ translations.step2 }}"
    },
    {
      "@type": "HowToStep",
      "position": 3,
      "name": "{{ translations.step3 }}",
      "text": "{{ translations.step3 }}"
    },
    {
      "@type": "HowToStep",
      "position": 4,
      "name": "{{ translations.step4 }}",
      "text": "{{ translations.step4 }}"
    }
  ]
}
</script>

<!-- Organization Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "WITHYM Video Downloader",
  "url": "{{ request.url_root }}",
  "logo": "{{ url_for('static', filename='images/logo.png', _external=True) }}",
  "sameAs": [
    "https://github.com/withym"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "Customer Support",
    "availableLanguage": [
      {% for lang in languages %}"{{ lang.code }}"{% if not loop.last %},{% endif %}{% endfor %}
    ]
  }
}
</script>

<!-- BreadcrumbList Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ request.url_root }}"
    }
  ]
}
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DT21HQLJ51"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DT21HQLJ51');
</script>

<!-- Google AdSense -->
{% if ads.adsense.enabled %}
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client={{ ads.adsense.client_id }}"
     crossorigin="anonymous"></script>
{% if ads.adsense.auto_ads %}
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "{{ ads.adsense.client_id }}",
    enable_page_level_ads: true
  });
</script>
{% endif %}
{% endif %}
